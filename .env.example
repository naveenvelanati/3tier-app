# ============================================
# HIGH AVAILABILITY 3-TIER APPLICATION
# Environment Configuration Template
# ============================================

# ====== AWS Configuration ======
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
AWS_DEFAULT_OUTPUT=json

# ====== Environment ======
ENVIRONMENT=production
APP_NAME=high-availability-app
APP_VERSION=1.0.0

# ====== Frontend Configuration ======
REACT_APP_API_URL=https://api.yourdomain.com
REACT_APP_WS_URL=wss://ws.yourdomain.com
REACT_APP_CDN_URL=https://cdn.yourdomain.com
REACT_APP_ENVIRONMENT=production
REACT_APP_ENABLE_ANALYTICS=true
REACT_APP_SENTRY_DSN=your_sentry_dsn_here

# ====== Backend Configuration ======
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_TIMEOUT=60
API_LOG_LEVEL=INFO
API_CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
API_RATE_LIMIT=100/minute

# ====== Database Configuration (MySQL/RDS) ======
MYSQL_HOST=prod-mysql.xxxxx.us-east-1.rds.amazonaws.com
MYSQL_PORT=3306
MYSQL_DATABASE=production_db
MYSQL_USER=admin
MYSQL_PASSWORD=REPLACE_WITH_AWS_SECRETS_MANAGER
MYSQL_POOL_SIZE=20
MYSQL_MAX_OVERFLOW=30
MYSQL_SSL_MODE=REQUIRED

# ====== MongoDB Configuration ======
MONGODB_HOST=prod-docdb.xxxxx.us-east-1.docdb.amazonaws.com
MONGODB_PORT=27017
MONGODB_DATABASE=production_db
MONGODB_USER=admin
MONGODB_PASSWORD=REPLACE_WITH_AWS_SECRETS_MANAGER
MONGODB_REPLICA_SET=rs0
MONGODB_SSL=true
MONGODB_AUTH_SOURCE=admin

# ====== Redis/ElastiCache Configuration ======
REDIS_HOST=prod-redis.xxxxx.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=REPLACE_WITH_AWS_SECRETS_MANAGER
REDIS_DB=0
REDIS_SSL=true
REDIS_CLUSTER_MODE=true

# ====== JWT & Authentication ======
JWT_SECRET_KEY=REPLACE_WITH_AWS_SECRETS_MANAGER
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
OAUTH_GOOGLE_CLIENT_ID=your_google_client_id
OAUTH_GOOGLE_CLIENT_SECRET=REPLACE_WITH_AWS_SECRETS_MANAGER

# ====== AWS Services ======
S3_BUCKET_NAME=prod-app-assets
S3_REGION=us-east-1
CLOUDFRONT_DISTRIBUTION_ID=E1234567890ABC

# SQS Queues
SQS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/prod-queue
SQS_DLQ_URL=https://sqs.us-east-1.amazonaws.com/123456789012/prod-dlq

# SNS Topics
SNS_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:prod-notifications

# Secrets Manager
SECRETS_MANAGER_PREFIX=prod/app/

# ====== Kubernetes Configuration ======
KUBE_NAMESPACE=production
KUBE_CLUSTER_NAME=production-cluster
KUBE_CONTEXT=arn:aws:eks:us-east-1:123456789012:cluster/production-cluster

# ====== Service Mesh (Istio) ======
ISTIO_ENABLED=true
ISTIO_NAMESPACE=istio-system
MTLS_MODE=STRICT

# ====== Load Balancer ======
ALB_DNS_NAME=prod-alb-123456789.us-east-1.elb.amazonaws.com
ALB_SCHEME=internet-facing
ALB_SSL_CERTIFICATE_ARN=arn:aws:acm:us-east-1:123456789012:certificate/xxxxx

# ====== Monitoring & Logging ======
# CloudWatch
CLOUDWATCH_LOG_GROUP=/aws/eks/production-cluster
CLOUDWATCH_RETENTION_DAYS=30

# Prometheus
PROMETHEUS_ENDPOINT=http://prometheus.monitoring.svc.cluster.local:9090
PROMETHEUS_SCRAPE_INTERVAL=30s

# Grafana
GRAFANA_URL=https://grafana.yourdomain.com
GRAFANA_API_KEY=REPLACE_WITH_AWS_SECRETS_MANAGER

# Datadog (Optional)
DATADOG_ENABLED=true
DATADOG_API_KEY=REPLACE_WITH_AWS_SECRETS_MANAGER
DATADOG_APP_KEY=REPLACE_WITH_AWS_SECRETS_MANAGER
DATADOG_SITE=datadoghq.com

# New Relic (Optional)
NEWRELIC_ENABLED=false
NEWRELIC_LICENSE_KEY=REPLACE_WITH_AWS_SECRETS_MANAGER
NEWRELIC_APP_NAME=high-availability-app

# ELK Stack
ELASTICSEARCH_HOST=elasticsearch.monitoring.svc.cluster.local
ELASTICSEARCH_PORT=9200
KIBANA_URL=https://kibana.yourdomain.com

# Jaeger Tracing
JAEGER_AGENT_HOST=jaeger-agent.monitoring.svc.cluster.local
JAEGER_AGENT_PORT=6831
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1

# ====== Security ======
# WAF
WAF_WEB_ACL_ID=arn:aws:wafv2:us-east-1:123456789012:global/webacl/prod-waf/xxxxx

# Secrets Encryption
ENCRYPTION_KEY=REPLACE_WITH_AWS_KMS_KEY_ID
KMS_KEY_ID=arn:aws:kms:us-east-1:123456789012:key/xxxxx

# Security Headers
ENABLE_HSTS=true
ENABLE_CSP=true
ENABLE_XSS_PROTECTION=true

# ====== CI/CD Configuration ======
CI_REGISTRY=123456789012.dkr.ecr.us-east-1.amazonaws.com
CI_REGISTRY_IMAGE=high-availability-app
DOCKER_BUILDKIT=1

# GitHub Actions
GITHUB_TOKEN=REPLACE_WITH_GITHUB_TOKEN
GITHUB_REPO=your-org/high-availability-app

# ArgoCD
ARGOCD_SERVER=argocd.yourdomain.com
ARGOCD_AUTH_TOKEN=REPLACE_WITH_ARGOCD_TOKEN

# ====== Feature Flags ======
ENABLE_CANARY_DEPLOYMENTS=true
ENABLE_BLUE_GREEN_DEPLOYMENTS=true
ENABLE_CIRCUIT_BREAKER=true
ENABLE_RATE_LIMITING=true
ENABLE_API_VERSIONING=true

# ====== Auto Scaling ======
MIN_REPLICAS=3
MAX_REPLICAS=20
TARGET_CPU_UTILIZATION=70
TARGET_MEMORY_UTILIZATION=80

# ====== Backup & Disaster Recovery ======
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=prod-backups-bucket
DR_REGION=us-west-2
RTO_MINUTES=15
RPO_MINUTES=5

# ====== Email Configuration ======
SMTP_HOST=email-smtp.us-east-1.amazonaws.com
SMTP_PORT=587
SMTP_USER=REPLACE_WITH_AWS_SECRETS_MANAGER
SMTP_PASSWORD=REPLACE_WITH_AWS_SECRETS_MANAGER
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_USE_TLS=true

# ====== Third-party Integrations ======
# Payment Gateway
STRIPE_PUBLIC_KEY=pk_live_xxxxx
STRIPE_SECRET_KEY=REPLACE_WITH_AWS_SECRETS_MANAGER
STRIPE_WEBHOOK_SECRET=REPLACE_WITH_AWS_SECRETS_MANAGER

# Analytics
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX-X
MIXPANEL_TOKEN=your_mixpanel_token

# ====== Development/Debug ======
DEBUG=false
ENABLE_SWAGGER=true
ENABLE_PROFILING=false
VERBOSE_LOGGING=false

# ====== Health Checks ======
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready
LIVENESS_CHECK_PATH=/live
HEALTH_CHECK_INTERVAL=30

# ====== Performance ======
MAX_CONNECTIONS=1000
CONNECTION_TIMEOUT=30
KEEP_ALIVE_TIMEOUT=5
REQUEST_TIMEOUT=60

# ====== Notes ======
# 1. Replace all REPLACE_WITH_AWS_SECRETS_MANAGER with actual secret ARNs or fetch at runtime
# 2. Use AWS Secrets Manager for all sensitive values
# 3. Never commit this file with real credentials to version control
# 4. Use separate .env files for different environments (dev, staging, prod)
# 5. Rotate secrets regularly (every 90 days minimum)
